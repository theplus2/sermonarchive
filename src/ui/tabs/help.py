import streamlit as st

def render_help():
    st.title("❓ 도움말 (User Manual)")
    st.caption("설교자의 서재 v5.3.1 사용 가이드")
    
    # 아이콘 및 마크다운 제거하여 깔끔하게 표시
    # Stremlit의 st.tabs는 마크다운을 일부 지원하지만, 때로 기호가 깨질 수 있음.
    tab0, tab1, tab2, tab3, tab4 = st.tabs([
        "👨‍💻 개발자 소개", 
        "🚀 시작하기 (필독)", 
        "🌟 기능 상세 가이드", 
        "❓ 자주 묻는 질문 (FAQ)", 
        "📢 업데이트 로그"
    ])
    
    # ... (중략) ...

    # 업데이트 로그 탭
    with tab4:
        st.markdown("""
        ### 📢 업데이트 로그
        
        ---
        
        #### 🆕 v5.3.1 (2026-01-25) - 빌드 안정화 및 버그 수정
        
        **🔧 개선 사항**
        - 🛠️ **빌드 에러 해결**: 실행 파일 빌드 시 `PyMuPDF(fitz)` 모듈이 누락되는 문제를 해결했습니다.
        - ⚡ **안정성 강화**: 코드 내부의 모듈 임포트 경로를 절대 경로로 통일하여 실행 안정성을 확보했습니다.
        
        ---
        
        #### 🆕 v5.3.0 (2026-01-21) - PDF 추출 품질 대폭 개선
        
        **✨ 새로운 기능**
        - 🚀 **PDF 추출 엔진 교체**: 기존 엔진의 한계를 극복하기 위해 PyMuPDF를 도입하여 텍스트 추출의 속도와 정확도를 획기적으로 높였습니다.
        - 🎯 **지능형 텍스트 정렬**: PDF의 레이아웃 좌표를 분석하여 문장 부호와 조사가 분리되지 않도록 처리하는 사용자 정의 정렬 로직을 적용했습니다.
        
        **🔧 개선 사항**
        - 🏷️ **버전 업데이트**: 기능 안정화 및 품질 개선에 따른 v5.3.0 메이저 업데이트를 실시했습니다.
        
        ---
        
        #### 🆕 v5.2.9 (2026-01-21) - PDF 지원 및 안정화
        
        **✨ 새로운 기능**
        - 📄 **PDF 파일 포맷 지원**: 설교 원고 중 PDF 파일의 텍스트 추출 및 검색 기능이 추가되었습니다.
        
        **🔧 개선 사항**
        - 🏷️ **버전 정보 통일**: 프로그램 전체의 버전 정보를 v5.2.9로 일괄 업데이트했습니다.
        
        ---
        
        #### 🆕 v5.2.0 (2026-01-20) - macOS 호환성 개선
        
        **🔧 개선 사항**
        - 🍎 **영문 파일명 적용**: macOS에서 한글 파일명으로 인한 실행 오류를 해결하기 위해 앱 파일명을 영문(`SermonArchive`)으로 변경했습니다.
        
        ---
        
        #### 🆕 v5.1.9 (2026-01-20) - macOS ZIP 배포
        
        **🔧 개선 사항**
        - 🍎 **macOS 배포 방식 변경**: DMG 대신 ZIP 파일로 배포합니다. 사용법: 압축 해제 → Applications 폴더로 드래그 → 우클릭 > 열기
        
        ---
        
        #### 🆕 v5.1.8 (2026-01-20) - macOS DMG 빌드 (hdiutil)
        
        **🔧 개선 사항**
        - 🍎 **네이티브 도구 사용**: create-dmg 대신 애플 기본 도구(hdiutil)로 DMG를 생성하여 안정성을 높였습니다.
        
        ---
        
        #### 🆕 v5.1.7 (2026-01-20) - macOS DMG 빌드 안정화
        
        **🔧 개선 사항**
        - 🍎 **DMG 생성 안정화**: create-dmg 명령어 옵션을 간소화하고 펴백 로직을 추가하여 안정적으로 DMG 파일이 생성되도록 개선했습니다.
        
        ---
        
        #### 🆕 v5.1.6 (2026-01-20) - macOS 빌드 긴급 수정
        
        **🔧 개선 사항**
        - 🍎 **빌드 시스템 개선**: 릴리즈 과정에서 발생한 시스템 오류(Bus error)를 해결하기 위해 내부 파일명 처리 로직을 개선했습니다. (영문 파일명 적용)
        
        ---
        
        #### 🆕 v5.1.5 (2026-01-20) - macOS 보안 경고 대응
        
        **🔧 개선 사항**
        - 🍎 **Gatekeeper 대응**: 맥에서 "손상된 파일"이라며 실행되지 않는 문제를 완화하기 위해 앱에 서명(Code Signing)을 추가했습니다.
        
        ---
        
        #### 🆕 v5.1.4 (2026-01-20) - macOS 빌드 안정화
        
        **🔧 개선 사항**
        - 🍎 **아이콘 생성 방식 개선**: macOS 빌드 시 아이콘 포맷 오류를 방지하기 위해 아이콘 생성 프로세스를 개선했습니다.
        
        ---
        
        #### 🆕 v5.1.3 (2026-01-20) - 설치 파일 개선
        
        **🔧 개선 사항**
        - 🍎 **macOS 설치 최적화**: 맥용 설치 파일이 `.dmg` 포맷으로 제공되어 설치가 더욱 쉬워졌습니다.
        - 📦 **파일명 변경**: 다운로드 시 헷갈리지 않게 파일명에 버전 정보가 명시됩니다. (예: `sermon_archive_v5.1.3.dmg`)
        
        ---
        
        #### 🆕 v5.1.2 (2026-01-20) - macOS DMG 지원
        
        **✨ 새로운 기능**
        - 🍎 **macOS 설치 파일(.dmg) 지원**: 맥 사용자를 위한 설치관리자 파일 제공 (기존 .zip 실행 문제 해결)
        
        ---
        
        #### 🆕 v5.1 (2026-01-20) - HWPX 지원 추가
        
        **✨ 새로운 기능**
        - 📄 **HWPX 파일 포맷 지원**: 한글 개방형 문서(.hwpx) 검색 및 텍스트 추출 가능
        
        **🔧 개선 사항**
        - 🔄 **릴리즈 프로세스 최적화**: 버전 관리 및 배포 자동화 스킬 도입
        
        ---
        
        #### 🆕 v4.9.5 (2026-01-17) - 히트맵 UX 대폭 개선
        
        **✨ 새로운 기능**
        - 🔥 **클릭 가능한 히트맵**: 구약/신약 각각 6열 그리드로 정렬, 색상 농도로 빈도 시각화
        - 📋 **구약/신약 별도 목록**: 각 히트맵 옆에 해당 성경의 설교 목록 표시
        - 📄 **페이징 기능**: 30건 이상 시 이전/다음 페이지 버튼으로 탐색
        
        **🔧 개선 사항**
        - ⚡ **DB 동기화 성능 최적화**: ThreadPoolExecutor 병렬 처리로 2~5배 속도 향상
        - 📖 **미리보기 4배 확장**: 설교 본문 미리보기 250자 → 1000자
        - 🎨 **히트맵 호버 애니메이션**: scale(1.18) 효과 및 그림자로 인터랙티브 UX
        - 📏 **버튼 크기 증가**: 70x70px 정사각형으로 가독성 향상
        
        ---
        
        #### 🆕 v4.9 (2026-01-15) - 대규모 기능 개선
        
        **✨ 새로운 기능**
        - 📚 **사이드바 네비게이션**: 어느 페이지에서든 원하는 메뉴로 바로 이동 가능
        - 👨‍💻 **개발자 소개 탭**: 도움말에 개발자 인사말 추가
        - 📖 **성경 장 번호 DB 저장**: 정렬 정확도 대폭 향상
        
        **🔧 개선 사항**
        - 🔄 **동기화 시 삭제된 파일 자동 정리**: 파일명 변경/삭제 시 이전 데이터 자동 제거
        - 📅 **날짜 패턴 확장**: `YYYY MMDD`, `pYYMMDD` 등 더 많은 형식 지원
        - 🏷️ **성경 태깅 정교화**: 오탐지 방지 (한 글자 축약형 단어 경계 체크)
        -  **HWP 텍스트 추출 개선**: 버퍼 제한 회피로 전체 내용 추출
        - 📂 **미분류 목록 개선**: 사유(날짜/태그 없음) 및 미리보기 표시
        - 🎨 **푸터 추가**: 모든 페이지 하단에 개발자 정보 표시
        - 📝 **도움말 전면 개편**: 친절하고 상세한 설명으로 업데이트
        
        ---
        
        #### v4.8 (2026-01-14) - 미분류 목록 페이징
        
        - 📂 **미분류 명단 페이징**: 30개씩 나누어 보기
        - ✨ **상세 도움말 복구**: 최신 기능 반영
        
        ---
        
        #### v4.6 - 구조 개선
        
        - 🔧 검색 성능 최적화 및 코드 구조 개선
        - 🎨 UI 스타일 분리
        
        ---
        
        #### v4.0 - 첫 정식 배포
        
        - ✅ 설교 원고 통합 검색
        - ✅ 연대기 기능
        - ✅ 성경별 통계 및 히트맵
        - ✅ 워드 클라우드
        - ✅ 엑셀 내보내기
        """, unsafe_allow_html=True)
